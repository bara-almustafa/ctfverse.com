<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CTFverse</title>
  <link rel="icon" type="image/png" href="logo.png">
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#98a0b3;--accent:#ff6b6b;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{margin:0;font-family:'Tajawal',ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e6eef8;background:linear-gradient(180deg,#071129 0%, #07162a 100%);min-height:100vh}
    .wrap{max-width:1200px;margin:40px auto;padding:20px}

    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center}
    .logo img{width:100%;height:100%;object-fit:cover}
    .title{font-size:20px;font-weight:700}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{background:var(--glass);border:1px solid rgba(255,255,255,0.04);padding:6px 10px;border-radius:6px;color:#e6eef8;cursor:pointer;font-size:12px}
    .btn.primary{background:linear-gradient(90deg,#2dd4bf,#60a5fa);color:#041025;border:none}

    .controls{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:18px;align-items:center}
    .search{flex:1;min-width:220px}
    .search input{width:100%;padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:#071227;color:#d9eefb;text-align:right}
    .filters{display:flex;gap:8px}
    .chip{padding:8px 10px;border-radius:999px;background:var(--card);border:1px solid rgba(255,255,255,0.03);color:var(--muted);cursor:pointer}
    .chip.active{background:#0b2940;color:#e6f6ff;border-color:rgba(45,212,191,0.12)}

    .stats{display:flex;gap:12px;color:var(--muted);font-size:13px;margin-bottom:12px}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:10px;padding:12px;border:1px solid rgba(255,255,255,0.03);}
    .card .meta{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .os{width:34px;height:34px;border-radius:6px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;font-weight:700}
    .name{font-weight:700;color:#eaf6ff}
    .small{font-size:13px;color:var(--muted)}
    .badges{display:flex;gap:6px;margin-top:8px;flex-wrap:wrap}
    .badge{padding:6px 8px;border-radius:6px;font-size:12px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);color:var(--muted)}
    .badge a{text-decoration:none;color:#8ab4f8}
    .difficulty{padding:6px 8px;border-radius:6px;font-weight:700}
    .d-low{background:#073b2f;color:#9ff0d3}
    .d-easy{background:#1f3b6f;color:#9fc6ff}
    .d-medium{background:#7a4e1d;color:#ffd8a8}
    .d-hard{background:#3c1220;color:#ffb3c0}

    footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(6,8,15,0.6),rgba(6,8,15,0.85))}
    .modal.open{display:flex}
    .dialog{background:#071227;border-radius:10px;padding:18px;max-width:640px;width:100%;border:1px solid rgba(255,255,255,0.04)}
    .form-row{display:flex;gap:8px;margin-bottom:8px}
    .form-row input,.form-row select{flex:1;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:#e6f6ff;text-align:right}

    @media (max-width:600px){.controls{flex-direction:column}.actions{display:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><img src="logo.png" alt="CTFverse Logo" /></div>
        <div>
          <div class="title">CTFverse â€” Ù…Ù†ØµØ© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ù‡Ø¬ÙˆÙ…ÙŠ</div>
          <div class="small">Ø£Ø¬Ù‡Ø²Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙˆØ´Ø±ÙˆØ­ Ø¹</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn" id="newVmBtn">Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø²</button>
        <button class="btn primary" id="discordBtn">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</button>
      </div>
    </header>

    <div class="controls">
      <div class="search"><input id="searchInp" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù…Ø¤Ù„ÙØŒ Ø£Ùˆ Ø§Ù„ÙˆØ³Ù…..." /></div>
      <div class="filters" id="difficultyFilters">
        <div class="chip active" data-d="all">Ø§Ù„ÙƒÙ„</div>
        <div class="chip" data-d="low">Ø³Ù‡Ù„ Ø¬Ø¯Ù‹Ø§</div>
        <div class="chip" data-d="easy">Ø³Ù‡Ù„</div>
        <div class="chip" data-d="medium">Ù…ØªÙˆØ³Ø·</div>
        <div class="chip" data-d="hard">ØµØ¹Ø¨</div>
      </div>
      <div style="margin-left:auto" class="small" id="statsText"></div>
    </div>

    <div class="stats" id="statsOS"></div>

    <div class="grid" id="grid"></div>

    <footer>Ù…Ø®ØµØµ Ù„Ù„ØªØ¹Ù„Ù… â€” Ù‡Ø°Ø§ Ù†Ù…ÙˆØ°Ø¬ ØªØ¬Ø±ÙŠØ¨ÙŠ.</footer>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² -->
  <div class="modal" id="vmModal">
    <div class="dialog">
      <h3 style="margin-top:0">Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² Ø¬Ø¯ÙŠØ¯</h3>
      <div class="form-row"><input placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²" id="vmName"/></div>
      <div class="form-row"><input placeholder="Ø§Ù„Ù…ÙÙ†Ø´Ø¦" id="vmCreator"/></div>
      <div class="form-row">
        <select id="vmDiff">
          <option value="low">Ø³Ù‡Ù„ Ø¬Ø¯Ù‹Ø§</option>
          <option value="easy">Ø³Ù‡Ù„</option>
          <option value="medium">Ù…ØªÙˆØ³Ø·</option>
          <option value="hard">ØµØ¹Ø¨</option>
        </select>
      </div>
      <div class="form-row"><input placeholder="Ø§Ù„ÙØ¦Ø©" id="vmCategory"/></div>
      <div class="form-row"><input placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„" id="vmLink"/></div>
      <div class="form-row"><input placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø´Ø±Ø­ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" id="vmWriteup"/></div>
      <div class="form-row"><input placeholder="Ø§Ù„Ø¹Ù„Ù… (Ø¯Ø§Ø®Ù„ {...})" id="vmFlag"/></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button class="btn" id="cancelVm">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn primary" id="submitVm">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ù„Ù… -->
  <div class="modal" id="flagModal">
    <div class="dialog">
      <h3 style="margin-top:0">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ù„Ù…</h3>
      <div id="flagVmName" class="small" style="margin-bottom:8px"></div>
      <div class="form-row">
        <input placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù„Ù… Ø¨Ø§Ù„Ø´ÙƒÙ„ ctfverse{...}" id="flagInput"/>
      </div>
      <div id="flagMessage" class="small" style="margin-bottom:8px;color:var(--muted)"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button class="btn" onclick="closeFlagModal()">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn primary" onclick="checkFlag()">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
    </div>
  </div>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
    const vms = [
      {id:1,name:'Misstep',creator:'minidump',os:'linux',size:'2.6GB',difficulty:'low',flags:1,writeups:1,category:'web',link:'#',writeup:'#',flag:'first_flag'},
      {id:2,name:'Open',creator:'Pylon',os:'linux',size:'1.6GB',difficulty:'easy',flags:1,writeups:0,category:'pwn',link:'#',writeup:'',flag:'game_root'}
    ];

    const grid = document.getElementById('grid');
    const statsText = document.getElementById('statsText');
    const statsOS = document.getElementById('statsOS');
    const searchInp = document.getElementById('searchInp');
    let activeFilter = 'all';

    function badgeForDiff(d){
      switch(d){
        case 'low': return `<span class="difficulty d-low">Ø³Ù‡Ù„ Ø¬Ø¯Ù‹Ø§</span>`;
        case 'easy': return `<span class="difficulty d-easy">Ø³Ù‡Ù„</span>`;
        case 'medium': return `<span class="difficulty d-medium">Ù…ØªÙˆØ³Ø·</span>`;
        case 'hard': return `<span class="difficulty d-hard">ØµØ¹Ø¨</span>`;
      }
    }

    function iconForCategory(cat){
      switch(cat){
        case 'web': return 'ğŸŒ ÙˆÙŠØ¨';
        case 'pwn': return 'ğŸ•¹ Ø§Ø³ØªØºÙ„Ø§Ù„';
        case 'reverse': return 'ğŸ” Ù‡Ù†Ø¯Ø³Ø© Ø¹ÙƒØ³ÙŠØ©';
        case 'dfir': return 'ğŸ•µï¸ ØªØ­Ù„ÙŠÙ„ Ø¬Ù†Ø§Ø¦ÙŠ';
        case 'crypto': return 'ğŸ”’ ØªØ´ÙÙŠØ±';
        case 'forensics': return 'ğŸ§ª Ø¬Ù†Ø§Ø¦ÙŠØ§Øª';
        case 'ai': return 'ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ';
        case 'mobile': return 'ğŸ“± Ù…ÙˆØ¨Ø§ÙŠÙ„';
        case 'coding': return 'ğŸ’» Ø¨Ø±Ù…Ø¬Ø©';
        case 'hardware': return 'ğŸ”§ Ø¹ØªØ§Ø¯';
        case 'ics': return 'âš™ Ø£Ù†Ø¸Ù…Ø© ØµÙ†Ø§Ø¹ÙŠØ©';
        case 'misc': return 'ğŸ“‚ Ù…ØªÙ†ÙˆØ¹';
        case 'osint': return 'ğŸ” Ø§Ø³ØªØ®Ø¨Ø§Ø±Ø§Øª Ù…ÙØªÙˆØ­Ø©';
        case 'secure coding': return 'ğŸ›¡ Ø¨Ø±Ù…Ø¬Ø© Ø¢Ù…Ù†Ø©';
        default: return 'â“ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
      }
    }

    function render(list){
      grid.innerHTML = '';
      if(list.length===0){grid.innerHTML = '<div style="color:var(--muted)">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¬Ù‡Ø²Ø©.</div>';return}
      for(const vm of list){
        const el = document.createElement('div');el.className='card';
        el.innerHTML = `
          <div class="meta">
            <div class="os">${vm.os==='linux'?'ğŸ§':'ğŸªŸ'}</div>
            <div style="flex:1"><div class="name">${vm.name}</div>
              <div class="small">Ø¨ÙˆØ§Ø³Ø·Ø© ${vm.creator} â€¢ ${vm.size}</div></div>
            <div>${badgeForDiff(vm.difficulty)}</div>
          </div>
          <div class="badges">
            <div class="badge"><button class="btn" onclick="openFlagBox(${vm.id})">ğŸ´ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ù„Ù…</button></div>
            <div class="badge"><a href="${vm.link}" target="_blank">â¬‡ ØªØ­Ù…ÙŠÙ„</a></div>
            ${vm.writeup ? `<div class="badge"><a href="${vm.writeup}" target="_blank">ğŸ“‘ Ø´Ø±Ø­</a></div>` : ''}
            <div class="badge">${iconForCategory(vm.category)}</div>
          </div>`;
        grid.appendChild(el);
      }
      statsText.textContent = `${vms.length} Ø¬Ù‡Ø§Ø² â€¢ ${vms.reduce((a,v)=>a+v.writeups,0)} Ø´Ø±ÙˆØ­`;
      const linuxCount = vms.filter(v=>v.os==='linux').length;
      const winCount = vms.filter(v=>v.os==='windows').length;
      statsOS.textContent = `Ø§Ù„Ù†Ø¸Ø§Ù…: Ù„ÙŠÙ†ÙƒØ³ (${linuxCount}) â€¢ ÙˆÙŠÙ†Ø¯ÙˆØ² (${winCount})`;
    }

    // ÙÙ„ØªØ±Ø© Ø§Ù„ØµØ¹ÙˆØ¨Ø©
    const filters = document.getElementById('difficultyFilters');
    filters.addEventListener('click',(e)=>{
      const chip = e.target.closest('.chip');
      if(!chip) return;
      [...filters.querySelectorAll('.chip')].forEach(c=>c.classList.remove('active'));
      chip.classList.add('active');
      activeFilter = chip.dataset.d;
      applyFilters();
    });

    // Ø§Ù„Ø¨Ø­Ø« + Ø§Ù„ÙÙ„ØªØ±Ø©
    searchInp.addEventListener('input',()=>applyFilters());
    function applyFilters(){
      const q = searchInp.value.trim().toLowerCase();
      let out = vms.filter(vm=>{
        if(activeFilter!=='all' && vm.difficulty!==activeFilter) return false;
        if(q==='') return true;
        return vm.name.toLowerCase().includes(q) || vm.creator.toLowerCase().includes(q);
      });
      render(out);
    }

    // Ø¹Ø±Ø¶ Ø£ÙˆÙ„ÙŠ
    render(vms);

    // Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø²
    const vmModal = document.getElementById('vmModal');
    document.getElementById('newVmBtn').addEventListener('click',()=>vmModal.classList.add('open'));
    document.getElementById('cancelVm').addEventListener('click',()=>vmModal.classList.remove('open'));
    document.getElementById('submitVm').addEventListener('click',()=>{
      const name = document.getElementById('vmName').value.trim();
      const creator = document.getElementById('vmCreator').value.trim();
      const diff = document.getElementById('vmDiff').value;
      const cat = document.getElementById('vmCategory').value.trim();
      const link = document.getElementById('vmLink').value.trim();
      const writeup = document.getElementById('vmWriteup').value.trim();
      const flag = document.getElementById('vmFlag').value.trim();
      if(!name||!creator){alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù…ÙÙ†Ø´Ø¦');return}
      const subject = encodeURIComponent("Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø² Ø¬Ø¯ÙŠØ¯: "+name);
      const body = encodeURIComponent(`Ø§Ù„Ø§Ø³Ù…: ${name}\nØ§Ù„Ù…ÙÙ†Ø´Ø¦: ${creator}\nØ§Ù„ØµØ¹ÙˆØ¨Ø©: ${diff}\nØ§Ù„ÙØ¦Ø©: ${cat}\nØ§Ù„Ø±Ø§Ø¨Ø·: ${link}\nØ§Ù„Ø´Ø±Ø­: ${writeup||'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}\nØ§Ù„Ø¹Ù„Ù…: ctfverse{${flag||'example'}}`);
      window.location.href = `mailto:baraa.almustafa@gmail.com?subject=${subject}&body=${body}`;
      vmModal.classList.remove('open');
    });

    // Ù†Ø§ÙØ°Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ù„Ù…
    let currentVmId = null;
    function openFlagBox(vmId){
      currentVmId = vmId;
      const vm = vms.find(v=>v.id===vmId);
      document.getElementById('flagVmName').textContent = "Ø§Ù„Ø¬Ù‡Ø§Ø²: " + vm.name;
      document.getElementById('flagInput').value = "";
      document.getElementById('flagMessage').textContent = "";
      document.getElementById('flagModal').classList.add('open');
    }
    function closeFlagModal(){document.getElementById('flagModal').classList.remove('open');}
    function checkFlag(){
      const vm = vms.find(v=>v.id===currentVmId);
      const userFlag = document.getElementById('flagInput').value.trim();
      const correctFlag = `ctfverse{${vm.flag}}`;
      if(userFlag === correctFlag){
        document.getElementById('flagMessage').style.color = "#9ff0b3";
        document.getElementById('flagMessage').textContent = "âœ… Ø§Ù„Ø¹Ù„Ù… ØµØ­ÙŠØ­!";
      } else {
        document.getElementById('flagMessage').style.color = "#ff9999";
        document.getElementById('flagMessage').textContent = "âŒ Ø§Ù„Ø¹Ù„Ù… ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
      }
    }

    // Ø²Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
    document.getElementById('discordBtn').addEventListener('click',()=>window.open('https://discord.gg','_blank'));
  </script>
</body>
</html>
